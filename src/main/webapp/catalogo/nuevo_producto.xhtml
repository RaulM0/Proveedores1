<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core">

<h:head>
    <title>Registro de Productos</title>
    <h:outputStylesheet name="css/estilos_registro.css"/>
</h:head>

<h:body>
    <div class="ventana-completa">

        <!-- Cabecera -->
        <div class="cabecera">
            <h:outputText value="Registro de Productos"/>
        </div>

        <h:form id="registroForm" enctype="multipart/form-data">
            <div class="contenido">

                <!-- Mensajes globales -->
                <h:messages id="mensajes"
                            globalOnly="true"
                            showDetail="true"
                            showSummary="true"
                            style="margin: 10px 0; font-weight: bold;"
                            errorClass="error-message"
                            infoClass="info-message"/>

                <!-- Fila de metadatos -->
                <div class="fila-metadata">
                    <div class="meta-izq">
                        <h:outputText value="Fecha Creaci√≥n:" styleClass="label-meta"/>
                        <h:outputText value="#{productoBean.fechaCreacion}" styleClass="valor-meta"/>
                    </div>
                    <div class="meta-der">
                        <h:outputText value="C√≥digo Producto:" styleClass="label-meta"/>
                        <h:outputText value="#{productoBean.codigoProducto}" styleClass="valor-meta"/>
                    </div>
                </div>

                <!-- Dos columnas -->
                <div class="contenedor-campos">

                    <!-- Columna Izquierda -->
                    <div class="columna">

                        <div class="campo">
                            <h:outputLabel value="Nombre:" for="nombre"/>
                            <h:inputText id="nombre" value="#{productoBean.nombre}" required="true"/>
                        </div>

                        <div class="campo">
                            <h:outputLabel value="Marca:" for="marca"/>
                            <h:inputText id="marca" value="#{productoBean.marca}" required="true"/>
                        </div>

                        <div class="campo">
                            <h:outputLabel value="Categor√≠a:" for="categoria"/>
                            <h:selectOneMenu id="categoria" value="#{productoBean.categoria}">
                                <f:selectItem itemLabel="Seleccione una categor√≠a" itemValue=""/>
                                <f:selectItem itemLabel="Motor" itemValue="Motor"/>
                                <f:selectItem itemLabel="Transmisi√≥n" itemValue="Transmisi√≥n"/>
                                <f:selectItem itemLabel="Sistema de frenos" itemValue="Sistema de frenos"/>
                                <f:selectItem itemLabel="Suspensi√≥n y direcci√≥n" itemValue="Suspensi√≥n y direcci√≥n"/>
                                <f:selectItem itemLabel="Sistema de escape y admisi√≥n" itemValue="Sistema de escape y admisi√≥n"/>
                            </h:selectOneMenu>
                        </div>

                        <div class="campo">
                            <h:outputLabel value="Precio Compra:" for="precioCompra"/>
                            <h:inputText id="precioCompra" value="#{productoBean.precioCompra}" required="true">
                                <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
                            </h:inputText>
                        </div>

                        <!-- Campo de imagen -->
                        <div class="campo">
                            <h:outputLabel value="Seleccionar imagen:" for="imagen"/>
                            <h:inputFile id="imagen" value="#{productoBean.imagen}" 
                                       accept="image/png,image/jpeg,image/jpg,image/gif"/>
                            <small style="color: #666; font-size: 11px;">
                                Formatos permitidos: JPG, PNG, GIF (m√°x. 10MB)
                            </small>
                        </div>

                        <div class="fecha-actualizacion">
                            <h:outputText value="Fecha Actualizaci√≥n:" styleClass="label-meta"/>
                            <h:outputText value="#{productoBean.fechaActualizacion}" styleClass="valor-meta"/>
                        </div>

                    </div>

                    <!-- Columna Derecha -->
                    <div class="columna">

                        <div class="campo">
                            <h:outputLabel value="Precio Venta:" for="precioVenta"/>
                            <h:inputText id="precioVenta" value="#{productoBean.precioVenta}" required="true">
                                <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
                            </h:inputText>
                        </div>

                        <div class="campo campo-area">
                            <h:outputLabel value="Caracter√≠sticas:" for="caracteristicas"/>
                            <h:inputTextarea id="caracteristicas" value="#{productoBean.caracteristicas}" rows="4"/>
                        </div>

                        <div class="campo">
                            <h:outputLabel value="Estatus:" for="estatus"/>
                            <h:selectOneMenu id="estatus" value="#{productoBean.estatus}" styleClass="select-pequeno">
                                <f:selectItem itemLabel="Activo" itemValue="Activo"/>
                                <f:selectItem itemLabel="Inactivo" itemValue="Inactivo"/>
                                <f:selectItem itemLabel="En pedido" itemValue="En pedido"/>
                            </h:selectOneMenu>
                        </div>

                        <!-- Vista previa de imagen -->
                        <div class="campo">
                            <h:outputLabel value="Vista previa:"/>
                            <h:panelGroup rendered="#{not empty productoBean.imagenRuta and productoBean.imagenRuta != 'default.png'}">
                                <div style="margin-top: 10px; text-align: center; padding: 15px; border: 2px solid #ddd; border-radius: 8px;">
                                    <h:graphicImage value="#{request.contextPath}/imagenes/#{productoBean.imagenRuta}" 
                                                  alt="Vista previa del producto"
                                                  style="max-width: 200px; max-height: 200px; border-radius: 4px;
                                                  box-shadow: 0 2px 4px rgba(0,0,0,0.1);"/>
                                    <br/>
                                    <h:outputText value="‚úÖ Imagen cargada" 
                                                style="font-size: 12px; color: green; margin-top: 5px; display: block;"/>
                                </div>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{empty productoBean.imagenRuta or productoBean.imagenRuta == 'default.png'}">
                                <div style="margin-top: 10px; text-align: center; padding: 20px; border: 2px dashed #ccc; border-radius: 8px; color: #999;">
                                    <h:outputText value="üì∑ No hay imagen cargada"/>
                                </div>
                            </h:panelGroup>
                        </div>

                    </div>
                </div>

                <!-- Botones finales -->
                <div class="contenedor-botones">
                    <h:commandButton value="Cancelar" 
                                   action="#{productoBean.cancelarRegistro}" 
                                   immediate="true" 
                                   styleClass="btn-cancelar"/>
                    <h:commandButton value="Registrar Producto" 
                                   action="#{productoBean.registrarProducto}" 
                                   styleClass="btn-registrar"/>
                </div>

            </div>
        </h:form>
    </div>
</h:body>
</html>