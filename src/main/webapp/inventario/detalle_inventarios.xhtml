<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title>Detalle de Inventario</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <h:outputStylesheet library="css" name="estilos.css" />
    <h:outputStylesheet library="css" name="detalleInventarios.css" />
</h:head>

<h:body>
    <header class="main-header">
        <div class="logo">
            <h1>Detalles de Inventario</h1>
        </div>
        <nav class="main-nav">
            <h:link value="Dashboard" outcome="dashboard_inventarios.xhtml" styleClass="back-btn" />
        </nav>
    </header>

    <main>
        <div class="detail-card">
            <h:graphicImage value="#{inventarioBean.detalleImagen}" alt="Imagen Producto"
                style="max-width:120px;max-height:120px;border-radius:8px;" />
            <div class="product-info">
                <h2>#{inventarioBean.detalleNombre}</h2>
                <p><b>Identificador:</b> #{inventarioBean.detalleId}</p>
                <p><b>Ubicación:</b> #{inventarioBean.detalleUbicacion}</p>
                <p><b>Descripción:</b> #{inventarioBean.detalleDescripcion}</p>
                <p><b>Stock Mínimo:</b> #{inventarioBean.detalleMinimo}</p>
                <p><b>Stock Máximo:</b> #{inventarioBean.detalleMaximo}</p>
            </div>
        </div>

        <div class="action-buttons">
            <h:commandButton value="Historial" action="#{inventarioBean.mostrarHistorial}" styleClass="historial-btn" />
            <h:commandButton value="Modificar Stock Máximo y Mínimo" action="#{inventarioBean.modificarStock}"
                styleClass="edit-btn" />
        </div>

        <h:panelGroup rendered="#{inventarioBean.historialVisible}">
            <div class="table-container">
                <div class="table-controls">
                    <div class="search-bar">
                        <h:inputText value="#{inventarioBean.terminoBusquedaHistorial}"
                            placeholder="Buscar movimiento..." />
                        <h:commandButton value="Buscar" action="#{inventarioBean.buscarHistorial}" />
                    </div>
                    <div>
                        <h:commandButton value="Crear Reporte" action="#{inventarioBean.crearReporte}"
                            styleClass="create-report" />
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Motivo</th>
                            <th>Stock Actual</th>
                            <th>Stock Anterior</th>
                            <th>Fecha</th>
                        </tr>
                    </thead>
                    <tbody>
                        <ui:repeat value="#{inventarioBean.historialMovimientos}" var="mov">
                            <tr>
                                <td>#{mov.producto}</td>
                                <td>#{mov.motivo}</td>
                                <td>#{mov.stockActual}</td>
                                <td>#{mov.stockAnterior}</td>
                                <td>#{mov.fecha}</td>
                            </tr>
                        </ui:repeat>
                    </tbody>
                </table>
            </div>
        </h:panelGroup>
    </main>
</h:body>

</html>